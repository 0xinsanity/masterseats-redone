{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext } from 'react';\nimport { StyledHeader, MenuLogoContainer, LogoBackground, MenuStyled, NavBarItemMain, NavBarItem, NavButtonStyled, NavDropdownContainer, NavButtonStyledTitle } from './Navbar.styled';\nimport OpenPage from './OpenPage';\nimport { ScreenSize } from '../../lib';\nimport { Grid, Dropdown, Menu } from 'antd';\nimport _ from 'lodash';\nimport { UserContext } from '../../lib/UserContext';\nconst {\n  useBreakpoint\n} = Grid;\nconst NAV_OPTIONS = [{\n  title: 'Home',\n  onClick: () => OpenPage('/')\n}, {\n  title: 'Login',\n  onClick: () => OpenPage('/login')\n}, {\n  title: 'Sign Up',\n  onClick: () => OpenPage('/register')\n}];\nconst NOT_LOGGED_IN_OPTIONS = [{\n  title: 'Log In',\n  onClick: () => OpenPage('/login')\n}];\n\nconst Navbar = props => {\n  _s();\n\n  const {\n    currentUser,\n    setToken\n  } = useContext(UserContext);\n  const {\n    selected,\n    isDashboard,\n    isLoggedIn\n  } = props;\n  const [isAtTop, setIsAtTop] = useState(true);\n  const screens = useBreakpoint();\n  const [screenSize, setScreenSize] = useState(undefined);\n  const DASHBOARD_NAV_OPTIONS = [{\n    title: 'Home',\n    onClick: () => OpenPage('/dashboard')\n  }, {\n    isDropdown: true,\n    title: currentUser !== null ? `Welcome, ${currentUser.first_name}` : 'Welcome'\n  }];\n  const menu = /*#__PURE__*/React.createElement(Menu, null, /*#__PURE__*/React.createElement(Menu.Item, null, /*#__PURE__*/React.createElement(NavButtonStyled, {\n    onClick: () => OpenPage('/profile')\n  }, \"Profile\"), /*#__PURE__*/React.createElement(NavButtonStyled, {\n    onClick: () => OpenPage('/selling')\n  }, \"Ticket Wallet\"), /*#__PURE__*/React.createElement(NavButtonStyled, {\n    onClick: () => OpenPage('/buying')\n  }, \"Buy A Ticket\"), /*#__PURE__*/React.createElement(NavButtonStyled, {\n    onClick: async () => {\n      localStorage.setItem('email', '');\n      localStorage.setItem('password', '');\n      await setToken(null);\n      OpenPage('/');\n    }\n  }, \"Log Out\")));\n  useEffect(() => {\n    Object.entries(screens).filter(screen => !!screen[1]).map(screen => {\n      if (screen[0] !== ScreenSize[screenSize]) {\n        setScreenSize(ScreenSize[screen[0]]);\n      }\n    });\n  }, [screens]);\n  useEffect(() => {\n    const handleScroll = () => {\n      const currentScrollY = window.scrollY;\n\n      if (currentScrollY == 0) {\n        setIsAtTop(true);\n      }\n\n      if (currentScrollY > 0) {\n        setIsAtTop(false);\n      }\n    };\n\n    window.addEventListener(\"scroll\", handleScroll, {\n      passive: true\n    });\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  }, [isAtTop]);\n  var options = [];\n\n  if (!isDashboard || isDashboard === undefined) {\n    options = NAV_OPTIONS;\n  } else {\n    if (isLoggedIn) {\n      options = DASHBOARD_NAV_OPTIONS;\n    } else {\n      options = NOT_LOGGED_IN_OPTIONS;\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(StyledHeader, {\n    style: {\n      backgroundColor: isAtTop ? '#FFCB05' : 'rgba(255,255,255,0.85)'\n    }\n  }, /*#__PURE__*/React.createElement(MenuLogoContainer, null, (!isDashboard || isDashboard === undefined) && screenSize !== 0 ? /*#__PURE__*/React.createElement(LogoBackground, {\n    style: {\n      visibility: isAtTop ? 'hidden' : 'visible',\n      opacity: isAtTop ? 0 : 1\n    },\n    href: '/'\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    height: 42,\n    src: require('../../../assets/images/logo/logo.png'),\n    alt: \"MasterSeats Logo\"\n  })) : null, /*#__PURE__*/React.createElement(MenuStyled, null, _.map(options, ({\n    title,\n    onClick,\n    isDropdown\n  }, index) => {\n    if (isDropdown !== undefined) {\n      return /*#__PURE__*/React.createElement(Dropdown, {\n        overlay: menu,\n        trigger: ['click']\n      }, /*#__PURE__*/React.createElement(NavDropdownContainer, null, /*#__PURE__*/React.createElement(NavButtonStyledTitle, null, title), /*#__PURE__*/React.createElement(\"img\", {\n        height: \"22\",\n        width: \"22\",\n        src: require('../../../assets/images/profile_big.png')\n      })));\n    }\n\n    if (index === selected) {\n      return /*#__PURE__*/React.createElement(NavBarItemMain, {\n        onClick: onClick\n      }, title);\n    } else {\n      return /*#__PURE__*/React.createElement(NavBarItem, {\n        onClick: onClick\n      }, title);\n    }\n  }))));\n};\n\n_s(Navbar, \"ypW1F+gwIjVmYM/K6W6KfGBNIpA=\", false, function () {\n  return [useBreakpoint];\n});\n\n_c = Navbar;\nexport default Navbar;\n\nvar _c;\n\n$RefreshReg$(_c, \"Navbar\");","map":{"version":3,"sources":["/Users/insanity/Documents/MasterSeats/new/client/src/areas/Universal/Navbar.tsx"],"names":["React","useEffect","useState","useContext","StyledHeader","MenuLogoContainer","LogoBackground","MenuStyled","NavBarItemMain","NavBarItem","NavButtonStyled","NavDropdownContainer","NavButtonStyledTitle","OpenPage","ScreenSize","Grid","Dropdown","Menu","_","UserContext","useBreakpoint","NAV_OPTIONS","title","onClick","NOT_LOGGED_IN_OPTIONS","Navbar","props","currentUser","setToken","selected","isDashboard","isLoggedIn","isAtTop","setIsAtTop","screens","screenSize","setScreenSize","undefined","DASHBOARD_NAV_OPTIONS","isDropdown","first_name","menu","localStorage","setItem","Object","entries","filter","screen","map","handleScroll","currentScrollY","window","scrollY","addEventListener","passive","removeEventListener","options","backgroundColor","visibility","opacity","require","index"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react'\nimport {\n    StyledHeader, \n    MenuLogoContainer, \n    LogoBackground, \n    MenuStyled, \n    NavBarItemMain, \n    NavBarItem,\n    NavButtonStyled,\n    NavDropdownContainer,\n    NavButtonStyledTitle\n} from './Navbar.styled'\nimport OpenPage from './OpenPage'\nimport {ScreenSize} from '../../lib'\nimport {Grid, Dropdown, Menu} from 'antd'\nimport _ from 'lodash'\nimport {UserContext} from '../../lib/UserContext'\nimport {ButtonLink} from '../Universal/Card.styled'\n\nconst {useBreakpoint} = Grid\n\nconst NAV_OPTIONS: {title: string, onClick: () => void}[] = [\n    {title: 'Home', onClick: () => OpenPage('/')},\n    {title: 'Login', onClick: () => OpenPage('/login')},\n    {title: 'Sign Up', onClick: () => OpenPage('/register')},\n]\n\nconst NOT_LOGGED_IN_OPTIONS: {title: string, onClick: () => void}[] = [\n    {title: 'Log In', onClick: () => OpenPage('/login')}\n] \n\ninterface NavbarProps {\n    selected: number\n    isDashboard?: boolean\n    isLoggedIn: boolean\n}\n\nconst Navbar: React.FC<NavbarProps> = (props) => {\n    const {currentUser, setToken} = useContext(UserContext)\n    const {selected, isDashboard, isLoggedIn} = props\n    const [isAtTop, setIsAtTop] = useState(true);\n    const screens = useBreakpoint()\n    const [screenSize, setScreenSize] = useState<ScreenSize>(undefined)\n    \n    const DASHBOARD_NAV_OPTIONS: {title: string, onClick?: () => void, isDropdown?: boolean}[] = [\n        {title: 'Home', onClick: () => OpenPage('/dashboard')},\n        {isDropdown: true, title: currentUser !== null ? `Welcome, ${currentUser.first_name}` : 'Welcome'}\n    ] \n\n    const menu = (\n        <Menu>\n            <Menu.Item>\n                <NavButtonStyled onClick={() => OpenPage('/profile')}>\n                    Profile\n                </NavButtonStyled>\n                <NavButtonStyled onClick={() => OpenPage('/selling')}>\n                    Ticket Wallet\n                </NavButtonStyled>\n                <NavButtonStyled onClick={() => OpenPage('/buying')}>\n                    Buy A Ticket\n                </NavButtonStyled>\n                <NavButtonStyled onClick={async () => {\n                    localStorage.setItem('email', '')\n                    localStorage.setItem('password', '')\n                    await setToken(null)\n                    OpenPage('/')\n                }}>\n                    Log Out\n                </NavButtonStyled>\n            </Menu.Item>\n        </Menu>\n    );\n\n    useEffect(() => {\n        Object.entries(screens)\n        .filter(screen => !!screen[1])\n        .map(screen => {\n            if (screen[0] !== ScreenSize[screenSize]) {\n                setScreenSize(ScreenSize[screen[0]])\n            }\n        })\n    }, [screens])\n  \n    useEffect(() => {\n      const handleScroll = () => {\n        const currentScrollY = window.scrollY;\n        if (currentScrollY == 0) {\n            setIsAtTop(true);\n        }\n        if (currentScrollY > 0) {\n            setIsAtTop(false);\n        }\n      };\n  \n      window.addEventListener(\"scroll\", handleScroll, { passive: true });\n  \n      return () => window.removeEventListener(\"scroll\", handleScroll);\n    }, [isAtTop]);\n\n    var options = []\n    if (!isDashboard || isDashboard === undefined) {\n        options = NAV_OPTIONS\n    } else {\n        if (isLoggedIn) {\n            options = DASHBOARD_NAV_OPTIONS\n        } else {\n            options = NOT_LOGGED_IN_OPTIONS\n        }\n    }\n\n    return (\n        <StyledHeader style={{backgroundColor: isAtTop ? '#FFCB05' : 'rgba(255,255,255,0.85)'}}>\n            <MenuLogoContainer>\n                {(!isDashboard || isDashboard === undefined) && screenSize !== 0 ? \n                    <LogoBackground style={{visibility: isAtTop ? 'hidden' : 'visible', opacity: isAtTop ? 0 : 1}} href={'/'}>\n                        <img height={42} src={require('../../../assets/images/logo/logo.png')} alt={\"MasterSeats Logo\"}/>\n                    </LogoBackground>\n                : null}\n                <MenuStyled>\n                    {_.map(options, ({title, onClick, isDropdown}, index) => {\n                        if (isDropdown !== undefined) {\n                            return (\n                            <Dropdown overlay={menu} trigger={['click']}>\n                                <NavDropdownContainer>\n                                    <NavButtonStyledTitle>\n                                        {title}\n                                    </NavButtonStyledTitle>\n                                    <img height=\"22\" width=\"22\" src={require('../../../assets/images/profile_big.png')}/>\n                                </NavDropdownContainer>\n                            </Dropdown>\n                            )\n                        }\n\n                        if (index === selected) {\n                            return (\n                                <NavBarItemMain onClick={onClick}>\n                                    {title}\n                                </NavBarItemMain>\n                            )\n                        } else {\n                            return (\n                                <NavBarItem onClick={onClick}>\n                                    {title}\n                                </NavBarItem>\n                            )\n                        }\n                    })}\n                </MenuStyled>\n            </MenuLogoContainer>\n        </StyledHeader>\n    )\n}\n\nexport default Navbar"]},"metadata":{},"sourceType":"module"}