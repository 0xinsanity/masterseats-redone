{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport { message } from 'antd';\nimport Head from 'next/head';\nimport RegisterCard from '../src/areas/RegisterCard';\nimport LoginBackground from '../src/components/LoginBackground';\nimport OpenPage from '../src/areas/Universal/OpenPage';\nimport { UserContext } from '../src/lib/UserContext';\nimport { useRouter } from 'next/router';\n\nconst Register = () => {\n  _s();\n\n  const {\n    api\n  } = useContext(UserContext);\n  const router = useRouter();\n  const [isFromSeller, setIsFromSeller] = useState(false);\n  useEffect(() => {\n    if (router.query.fromselling !== undefined) {\n      setIsFromSeller(true);\n    }\n  }, [router.query]);\n\n  const onFinish = async ({\n    uniq_id,\n    password,\n    rep_password,\n    first_name,\n    last_name\n  }) => {\n    if (password !== rep_password) {\n      message.error(\"Your new password is not the same as your repeated password.\");\n      return;\n    } else {\n      try {\n        await api.register({\n          email: uniq_id,\n          password,\n          first_name,\n          last_name\n        });\n      } catch (err) {\n        console.log(err);\n        message.error(\"There was a problem making your account. If you had already created an account, please login. If you have not, please contact us for support.\");\n        return;\n      }\n\n      OpenPage('/thankyou?email');\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Head, null, /*#__PURE__*/React.createElement(\"title\", null, \"MasterSeats \\u2022 Register\")), /*#__PURE__*/React.createElement(LoginBackground, null, /*#__PURE__*/React.createElement(RegisterCard, {\n    title: \"Sign Up\",\n    onFinish: onFinish,\n    isFromSeller: isFromSeller\n  })));\n};\n\n_s(Register, \"Xcf8mPVGgR4RYPPZeXNaT/G3YW8=\", false, function () {\n  return [useRouter];\n});\n\n_c = Register;\nexport default Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["/Users/insanity/Documents/MasterSeats/new/client/pages/register.tsx"],"names":["React","useContext","useEffect","useState","message","Head","RegisterCard","LoginBackground","OpenPage","UserContext","useRouter","Register","api","router","isFromSeller","setIsFromSeller","query","fromselling","undefined","onFinish","uniq_id","password","rep_password","first_name","last_name","error","register","email","err","console","log"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,UAAf,EAA2BC,SAA3B,EAAsCC,QAAtC,QAAqD,OAArD;AACA,SAAQC,OAAR,QAAsB,MAAtB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,YAAP,MAAyB,2BAAzB;AAEA,OAAOC,eAAP,MAA4B,mCAA5B;AACA,OAAOC,QAAP,MAAqB,iCAArB;AACA,SAASC,WAAT,QAA4B,wBAA5B;AAEA,SAAQC,SAAR,QAAwB,aAAxB;;AAEA,MAAMC,QAAkB,GAAG,MAAM;AAAA;;AAC7B,QAAM;AAACC,IAAAA;AAAD,MAAQX,UAAU,CAACQ,WAAD,CAAxB;AACA,QAAMI,MAAM,GAAGH,SAAS,EAAxB;AACA,QAAM,CAACI,YAAD,EAAeC,eAAf,IAAkCZ,QAAQ,CAAC,KAAD,CAAhD;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIW,MAAM,CAACG,KAAP,CAAaC,WAAb,KAA6BC,SAAjC,EAA4C;AACxCH,MAAAA,eAAe,CAAC,IAAD,CAAf;AACH;AACJ,GAJQ,EAIN,CAACF,MAAM,CAACG,KAAR,CAJM,CAAT;;AAOA,QAAMG,QAAQ,GAAG,OAAO;AAACC,IAAAA,OAAD;AAAUC,IAAAA,QAAV;AAAoBC,IAAAA,YAApB;AAAkCC,IAAAA,UAAlC;AAA8CC,IAAAA;AAA9C,GAAP,KAAoE;AACjF,QAAIH,QAAQ,KAAKC,YAAjB,EAA+B;AAC3BlB,MAAAA,OAAO,CAACqB,KAAR,CAAc,8DAAd;AACA;AACH,KAHD,MAGO;AACH,UAAI;AACA,cAAMb,GAAG,CAACc,QAAJ,CAAa;AAACC,UAAAA,KAAK,EAAEP,OAAR;AACCC,UAAAA,QADD;AAECE,UAAAA,UAFD;AAGCC,UAAAA;AAHD,SAAb,CAAN;AAKH,OAND,CAME,OAAOI,GAAP,EAAY;AACVC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAxB,QAAAA,OAAO,CAACqB,KAAR,CAAc,+IAAd;AACA;AACH;;AACDjB,MAAAA,QAAQ,CAAC,iBAAD,CAAR;AACH;AACJ,GAlBD;;AAoBA,sBACI,uDACI,oBAAC,IAAD,qBACI,iEADJ,CADJ,eAII,oBAAC,eAAD,qBACI,oBAAC,YAAD;AAAc,IAAA,KAAK,EAAE,SAArB;AAAgC,IAAA,QAAQ,EAAEW,QAA1C;AAAoD,IAAA,YAAY,EAAEL;AAAlE,IADJ,CAJJ,CADJ;AAUH,CA1CD;;GAAMH,Q;UAEaD,S;;;KAFbC,Q;AA4CN,eAAeA,QAAf","sourcesContent":["import React, {useContext, useEffect, useState} from 'react'\nimport {message} from 'antd'\nimport Head from 'next/head'\nimport RegisterCard from '../src/areas/RegisterCard'\nimport styled from 'styled-components'\nimport LoginBackground from '../src/components/LoginBackground'\nimport OpenPage from '../src/areas/Universal/OpenPage'\nimport { UserContext } from '../src/lib/UserContext'\nimport {resetSellingForm} from '../src/lib'\nimport {useRouter} from 'next/router'\n\nconst Register: React.FC = () => {\n    const {api} = useContext(UserContext)\n    const router = useRouter()\n    const [isFromSeller, setIsFromSeller] = useState(false)\n\n    useEffect(() => {\n        if (router.query.fromselling !== undefined) {\n            setIsFromSeller(true)\n        }\n    }, [router.query])\n\n\n    const onFinish = async ({uniq_id, password, rep_password, first_name, last_name}) => {\n        if (password !== rep_password) {\n            message.error(\"Your new password is not the same as your repeated password.\")\n            return\n        } else {\n            try {\n                await api.register({email: uniq_id,\n                                    password, \n                                    first_name, \n                                    last_name\n                                })\n            } catch (err) {\n                console.log(err)\n                message.error(\"There was a problem making your account. If you had already created an account, please login. If you have not, please contact us for support.\")\n                return\n            }\n            OpenPage('/thankyou?email')\n        }\n    }\n\n    return (\n        <>\n            <Head>\n                <title>MasterSeats â€¢ Register</title>\n            </Head>\n            <LoginBackground>\n                <RegisterCard title={\"Sign Up\"} onFinish={onFinish} isFromSeller={isFromSeller} />\n            </LoginBackground>\n        </>\n    );\n};\n\nexport default Register;"]},"metadata":{},"sourceType":"module"}