{"ast":null,"code":"import React, { useContext } from 'react';\nimport { message } from 'antd';\nimport Head from 'next/head';\nimport LoginBackground from '../src/components/LoginBackground';\nimport ResetPasswordComponent from '../src/areas/LoginCard/ResetPasswordComponent';\nimport OpenPage from '../src/areas/OpenPage';\nimport { useRouter } from 'next/router';\nimport { UserContext } from '../src/lib/UserContext';\n\nconst ResetPassword = () => {\n  const {\n    api\n  } = useContext(UserContext);\n  const router = useRouter();\n\n  const resetPassword = async body_change => {\n    if (body_change.new_password !== body_change.repeat_password) {\n      message.error(\"Your new password is not the same as your repeated password.\");\n      return;\n    }\n\n    try {\n      await api.changePassword({\n        new_password: body_change.new_password,\n        token: router.query.token\n      });\n      message.success(\"Your password has been changed. Please login with your new password.\");\n      OpenPage('/login');\n    } catch (err) {\n      message.error(\"There was a problem verifying your account. Please contact us.\");\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Head, null, /*#__PURE__*/React.createElement(\"title\", null, \"MasterSeats \\u2022 Reset Password \")), /*#__PURE__*/React.createElement(LoginBackground, null, /*#__PURE__*/React.createElement(ResetPasswordComponent, {\n    onFinish: resetPassword\n  })));\n};\n\nexport default ResetPassword;","map":{"version":3,"sources":["/Users/insanity/Documents/MasterSeats/new/client/pages/resetpassword.tsx"],"names":["React","useContext","message","Head","LoginBackground","ResetPasswordComponent","OpenPage","useRouter","UserContext","ResetPassword","api","router","resetPassword","body_change","new_password","repeat_password","error","changePassword","token","query","success","err"],"mappings":"AAAA,OAAOA,KAAP,IAAeC,UAAf,QAAqD,OAArD;AACA,SAA+CC,OAA/C,QAA6D,MAA7D;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,eAAP,MAA4B,mCAA5B;AACA,OAAOC,sBAAP,MAAmC,+CAAnC;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,SAAQC,SAAR,QAAwB,aAAxB;AACA,SAAQC,WAAR,QAA0B,wBAA1B;;AAGA,MAAMC,aAAuB,GAAG,MAAM;AAClC,QAAM;AAACC,IAAAA;AAAD,MAAQT,UAAU,CAACO,WAAD,CAAxB;AACA,QAAMG,MAAM,GAAGJ,SAAS,EAAxB;;AAEA,QAAMK,aAAa,GAAG,MAAOC,WAAP,IAAuB;AACzC,QAAIA,WAAW,CAACC,YAAZ,KAA6BD,WAAW,CAACE,eAA7C,EAA8D;AAC1Db,MAAAA,OAAO,CAACc,KAAR,CAAc,8DAAd;AACA;AACH;;AAED,QAAI;AACA,YAAMN,GAAG,CAACO,cAAJ,CAAmB;AAACH,QAAAA,YAAY,EAAED,WAAW,CAACC,YAA3B;AAAyCI,QAAAA,KAAK,EAAEP,MAAM,CAACQ,KAAP,CAAaD;AAA7D,OAAnB,CAAN;AACAhB,MAAAA,OAAO,CAACkB,OAAR,CAAgB,sEAAhB;AACAd,MAAAA,QAAQ,CAAC,QAAD,CAAR;AACH,KAJD,CAIE,OAAOe,GAAP,EAAY;AACVnB,MAAAA,OAAO,CAACc,KAAR,CAAc,gEAAd;AACH;AACJ,GAbD;;AAeA,sBACI,uDACI,oBAAC,IAAD,qBACI,wEADJ,CADJ,eAII,oBAAC,eAAD,qBACI,oBAAC,sBAAD;AAAwB,IAAA,QAAQ,EAAEJ;AAAlC,IADJ,CAJJ,CADJ;AAUH,CA7BD;;AA+BA,eAAeH,aAAf","sourcesContent":["import React, {useContext, useState, useEffect} from 'react'\nimport {Button, Form, Input, Row, Radio, Card, message} from 'antd'\nimport Head from 'next/head'\nimport LoginBackground from '../src/components/LoginBackground'\nimport ResetPasswordComponent from '../src/areas/LoginCard/ResetPasswordComponent'\nimport OpenPage from '../src/areas/OpenPage'\nimport {useRouter} from 'next/router'\nimport {UserContext} from '../src/lib/UserContext'\nimport { ChangePassword } from '../api'\n\nconst ResetPassword: React.FC = () => {\n    const {api} = useContext(UserContext)\n    const router = useRouter()\n    \n    const resetPassword = async (body_change) => {\n        if (body_change.new_password !== body_change.repeat_password) {\n            message.error(\"Your new password is not the same as your repeated password.\")\n            return\n        }\n\n        try {\n            await api.changePassword({new_password: body_change.new_password, token: router.query.token as string})\n            message.success(\"Your password has been changed. Please login with your new password.\")\n            OpenPage('/login')\n        } catch (err) {\n            message.error(\"There was a problem verifying your account. Please contact us.\")\n        }\n    }\n\n    return (\n        <>\n            <Head>\n                <title>MasterSeats â€¢ Reset Password </title>\n            </Head>\n            <LoginBackground>\n                <ResetPasswordComponent onFinish={resetPassword} />\n            </LoginBackground>\n        </>\n    );\n};\n\nexport default ResetPassword;"]},"metadata":{},"sourceType":"module"}