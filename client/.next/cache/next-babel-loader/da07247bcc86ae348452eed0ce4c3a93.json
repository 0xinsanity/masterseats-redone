{"ast":null,"code":"import React, { useContext } from 'react';\nimport { message } from 'antd';\nimport Head from 'next/head';\nimport LoginCard from '../src/areas/LoginCard';\nimport LoginBackground from '../src/components/LoginBackground';\nimport OpenPage from '../src/areas/Universal/OpenPage';\nimport { UserContext } from '../src/lib/UserContext';\nimport { useRouter } from 'next/router';\n\nconst Login = () => {\n  const {\n    setToken,\n    api,\n    currentUser\n  } = useContext(UserContext);\n  const router = useRouter();\n\n  const onFinish = async ({\n    uniq_id,\n    password\n  }) => {\n    try {\n      const email = uniq_id;\n      const res = await api.login({\n        email,\n        password\n      });\n      localStorage.setItem('email', email);\n      localStorage.setItem('password', password);\n      await setToken(res.data, true);\n\n      if (router.query.fromverify !== undefined) {\n        OpenPage('/ticketwallet?fromverify');\n      } else {\n        OpenPage('/dashboard');\n      }\n    } catch (error) {\n      if (error.response.status === 410) {\n        message.info(\"Please remember to verify your email before trying to login.\");\n      } else {\n        message.error(\"Your email and/or password were incorrect. Please try again.\");\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Head, null, /*#__PURE__*/React.createElement(\"title\", null, \"MasterSeats \\u2022 Login\")), /*#__PURE__*/React.createElement(LoginBackground, null, /*#__PURE__*/React.createElement(LoginCard, {\n    title: \"Login\",\n    onFinish: onFinish\n  })));\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/insanity/Documents/MasterSeats/new/client/pages/login.tsx"],"names":["React","useContext","message","Head","LoginCard","LoginBackground","OpenPage","UserContext","useRouter","Login","setToken","api","currentUser","router","onFinish","uniq_id","password","email","res","login","localStorage","setItem","data","query","fromverify","undefined","error","response","status","info"],"mappings":"AAAA,OAAOA,KAAP,IAAeC,UAAf,QAA4C,OAA5C;AACA,SAAQC,OAAR,QAAsB,MAAtB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,eAAP,MAA4B,mCAA5B;AACA,OAAOC,QAAP,MAAqB,iCAArB;AACA,SAAQC,WAAR,QAA0B,wBAA1B;AAEA,SAASC,SAAT,QAA0B,aAA1B;;AAEA,MAAMC,KAAe,GAAG,MAAM;AAC1B,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,GAAZ;AAAiBC,IAAAA;AAAjB,MAAiCX,UAAU,CAACM,WAAD,CAAjD;AACA,QAAMM,MAAM,GAAGL,SAAS,EAAxB;;AAEA,QAAMM,QAAQ,GAAG,OAAO;AAACC,IAAAA,OAAD;AAAUC,IAAAA;AAAV,GAAP,KAA+B;AAC5C,QAAI;AACA,YAAMC,KAAK,GAAGF,OAAd;AACA,YAAMG,GAAG,GAAG,MAAMP,GAAG,CAACQ,KAAJ,CAAU;AAACF,QAAAA,KAAD;AAAQD,QAAAA;AAAR,OAAV,CAAlB;AACAI,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BJ,KAA9B;AACAG,MAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCL,QAAjC;AACA,YAAMN,QAAQ,CAACQ,GAAG,CAACI,IAAL,EAAW,IAAX,CAAd;;AACA,UAAIT,MAAM,CAACU,KAAP,CAAaC,UAAb,KAA4BC,SAAhC,EAA2C;AACvCnB,QAAAA,QAAQ,CAAC,0BAAD,CAAR;AACH,OAFD,MAEO;AACHA,QAAAA,QAAQ,CAAC,YAAD,CAAR;AACH;AACJ,KAXD,CAWE,OAAOoB,KAAP,EAAc;AACZ,UAAIA,KAAK,CAACC,QAAN,CAAeC,MAAf,KAA0B,GAA9B,EAAmC;AAC/B1B,QAAAA,OAAO,CAAC2B,IAAR,CAAa,8DAAb;AACH,OAFD,MAEO;AACH3B,QAAAA,OAAO,CAACwB,KAAR,CAAc,8DAAd;AACH;AACJ;AACJ,GAnBD;;AAqBA,sBACI,uDACI,oBAAC,IAAD,qBACI,8DADJ,CADJ,eAII,oBAAC,eAAD,qBACI,oBAAC,SAAD;AAAW,IAAA,KAAK,EAAE,OAAlB;AAA2B,IAAA,QAAQ,EAAEZ;AAArC,IADJ,CAJJ,CADJ;AAUH,CAnCD;;AAqCA,eAAeL,KAAf","sourcesContent":["import React, {useContext, useEffect } from 'react'\nimport {message} from 'antd'\nimport Head from 'next/head'\nimport LoginCard from '../src/areas/LoginCard'\nimport LoginBackground from '../src/components/LoginBackground'\nimport OpenPage from '../src/areas/Universal/OpenPage'\nimport {UserContext} from '../src/lib/UserContext'\nimport { resetSellingIfUndefined } from '../src/lib'\nimport { useRouter } from 'next/router'\n\nconst Login: React.FC = () => {\n    const { setToken, api, currentUser } = useContext(UserContext)\n    const router = useRouter()\n    \n    const onFinish = async ({uniq_id, password}) => {\n        try {\n            const email = uniq_id\n            const res = await api.login({email, password})\n            localStorage.setItem('email', email)\n            localStorage.setItem('password', password)\n            await setToken(res.data, true)\n            if (router.query.fromverify !== undefined) {\n                OpenPage('/ticketwallet?fromverify')\n            } else {\n                OpenPage('/dashboard')\n            }\n        } catch (error) {\n            if (error.response.status === 410) {\n                message.info(\"Please remember to verify your email before trying to login.\")\n            } else {\n                message.error(\"Your email and/or password were incorrect. Please try again.\")\n            }\n        }\n    }\n\n    return (\n        <>\n            <Head>\n                <title>MasterSeats â€¢ Login</title>\n            </Head>\n            <LoginBackground>\n                <LoginCard title={\"Login\"} onFinish={onFinish} />\n            </LoginBackground>\n        </>\n    );\n};\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}