{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useContext, useEffect } from 'react';\nimport { message } from 'antd';\nimport Head from 'next/head';\nimport LoginBackground from '../src/components/LoginBackground';\nimport { UserContext } from '../src/lib/UserContext';\nimport { useRouter } from 'next/router';\nimport OpenPage from '../src/areas/Universal/OpenPage';\n\nconst Verification = props => {\n  _s();\n\n  const {\n    api,\n    setToken\n  } = useContext(UserContext);\n  const router = useRouter();\n  useEffect(() => {\n    const verifyEmailFetch = async () => {\n      if (router.query.token === undefined) return;\n\n      try {\n        const body = await api.verifyEmail({\n          id: router.query.token\n        });\n        setToken(body.data);\n      } catch (err) {\n        message.error(\"There was a problem verifying your account. Please contact us.\");\n      }\n\n      message.success(\"Thank you for verifying your email!\");\n      console.log(localStorage.getItem('game'));\n\n      if (localStorage.getItem('game') !== undefined && localStorage.getItem('game') !== '') {\n        OpenPage('/login?fromverify');\n      } else {\n        OpenPage('/login');\n      }\n    };\n\n    verifyEmailFetch();\n  }, [router.query]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Head, null, /*#__PURE__*/React.createElement(\"title\", null, \"MasterSeats \\u2022 Email Verification\")), /*#__PURE__*/React.createElement(LoginBackground, null));\n};\n\n_s(Verification, \"7maoAdMat6h1KKNnUWKjLwCD0io=\", false, function () {\n  return [useRouter];\n});\n\n_c = Verification;\nexport default Verification;\n\nvar _c;\n\n$RefreshReg$(_c, \"Verification\");","map":{"version":3,"sources":["/Users/insanity/Documents/MasterSeats/new/client/pages/verification.tsx"],"names":["React","useContext","useEffect","message","Head","LoginBackground","UserContext","useRouter","OpenPage","Verification","props","api","setToken","router","verifyEmailFetch","query","token","undefined","body","verifyEmail","id","data","err","error","success","console","log","localStorage","getItem"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,UAAf,EAAqCC,SAArC,QAAqD,OAArD;AACA,SAA+CC,OAA/C,QAA6D,MAA7D;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,eAAP,MAA4B,mCAA5B;AAEA,SAASC,WAAT,QAA4B,wBAA5B;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,QAAP,MAAqB,iCAArB;;AAEA,MAAMC,YAAsB,GAAGC,KAAK,IAAI;AAAA;;AACpC,QAAM;AAACC,IAAAA,GAAD;AAAMC,IAAAA;AAAN,MAAkBX,UAAU,CAACK,WAAD,CAAlC;AACA,QAAMO,MAAM,GAAGN,SAAS,EAAxB;AAEAL,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMY,gBAAgB,GAAG,YAAY;AACjC,UAAID,MAAM,CAACE,KAAP,CAAaC,KAAb,KAAuBC,SAA3B,EAAsC;;AAEtC,UAAI;AACA,cAAMC,IAAI,GAAG,MAAMP,GAAG,CAACQ,WAAJ,CAAgB;AAACC,UAAAA,EAAE,EAAEP,MAAM,CAACE,KAAP,CAAaC;AAAlB,SAAhB,CAAnB;AACAJ,QAAAA,QAAQ,CAACM,IAAI,CAACG,IAAN,CAAR;AACH,OAHD,CAGE,OAAOC,GAAP,EAAY;AACVnB,QAAAA,OAAO,CAACoB,KAAR,CAAc,gEAAd;AACH;;AACDpB,MAAAA,OAAO,CAACqB,OAAR,CAAgB,qCAAhB;AAEAC,MAAAA,OAAO,CAACC,GAAR,CAAYC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAZ;;AACA,UAAID,YAAY,CAACC,OAAb,CAAqB,MAArB,MAAiCX,SAAjC,IAA8CU,YAAY,CAACC,OAAb,CAAqB,MAArB,MAAiC,EAAnF,EAAuF;AACnFpB,QAAAA,QAAQ,CAAC,mBAAD,CAAR;AACH,OAFD,MAEO;AACHA,QAAAA,QAAQ,CAAC,QAAD,CAAR;AACH;AACJ,KAjBD;;AAmBAM,IAAAA,gBAAgB;AACnB,GArBQ,EAqBN,CAACD,MAAM,CAACE,KAAR,CArBM,CAAT;AAuBA,sBACI,uDACI,oBAAC,IAAD,qBACI,2EADJ,CADJ,eAII,oBAAC,eAAD,OAJJ,CADJ;AAUH,CArCD;;GAAMN,Y;UAEaF,S;;;KAFbE,Y;AAuCN,eAAeA,YAAf","sourcesContent":["import React, {useContext, useState, useEffect} from 'react'\nimport {Button, Form, Input, Row, Radio, Card, message} from 'antd'\nimport Head from 'next/head'\nimport LoginBackground from '../src/components/LoginBackground'\nimport ForgotPasswordComponent from '../src/areas/LoginCard/ForgotPasswordComponent'\nimport { UserContext } from '../src/lib/UserContext'\nimport { useRouter } from 'next/router'\nimport OpenPage from '../src/areas/Universal/OpenPage'\n\nconst Verification: React.FC = props => {\n    const {api, setToken} = useContext(UserContext)\n    const router = useRouter()\n\n    useEffect(() => {\n        const verifyEmailFetch = async () => {\n            if (router.query.token === undefined) return\n\n            try {\n                const body = await api.verifyEmail({id: router.query.token as string})\n                setToken(body.data)\n            } catch (err) {\n                message.error(\"There was a problem verifying your account. Please contact us.\")\n            }\n            message.success(\"Thank you for verifying your email!\")\n\n            console.log(localStorage.getItem('game'))\n            if (localStorage.getItem('game') !== undefined && localStorage.getItem('game') !== '') {\n                OpenPage('/login?fromverify')\n            } else {\n                OpenPage('/login')\n            }\n        }\n\n        verifyEmailFetch()\n    }, [router.query])\n\n    return (\n        <>\n            <Head>\n                <title>MasterSeats â€¢ Email Verification</title>\n            </Head>\n            <LoginBackground>\n                \n            </LoginBackground>\n        </>\n    );\n};\n\nexport default Verification;"]},"metadata":{},"sourceType":"module"}